## Описание
В этой работе создается основной контейнер с инстансом docker и реплика. 

Запуск выполняется коммандой:

```
sh ./start.sh
```
## Описание docker-compose
В параметре *volumes* мапим все локальные скрипты + конфиги внутрь докера. (кроме slave - конфига в мастер, ибо мастер не реплика и будут проблемы)

Порты мастера и реплики 5432 и 5433 соответвенно. Пробовал поставить мастера на другой порт, но реплика тогда не работает. Но по итогу так и не смог, что очень странно.

В фале postgresql.conf есть параметр *shared_buffers*. Могут возникать пробемы с нехваткой памяти, тогда ее можно умешать.



## Порядок работы программы:
1. Останавливаем все контейнеры, чтобы начать работать с нуля.
2. Удаляем data и data-slave
3. Заходим в master и выполяем инициализацию внутри контейнера
4. Копируем конфиги в slave
5. Поднимаем slave, master
6. Выполняем скрипт, который инициализиет БД.

## Проверка
Проверим, что репликация работает. Через любую IDE можно подключиться к 2 контейнерам и убедиться, что базы полностью совпадают

![alt text](https://github.com/klyshnikov/dwh-hw1/blob/main/%D0%A1%D0%BD%D0%B8%D0%BC%D0%BE%D0%BA%20%D1%8D%D0%BA%D1%80%D0%B0%D0%BD%D0%B0%20%D0%BE%D1%82%202024-11-04%2000-57-36.png)
